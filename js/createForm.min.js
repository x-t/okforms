var q=-1;function strrepeat(a,b){for(var c="",d=0;d<b;d++)c+=a;return c}
function light_type(a){var b=document.getElementById("choiceSingle"),c=document.getElementById("choiceMult"),d=document.getElementById("choiceText"),g=document.getElementById("choiceDrop"),e=document.getElementById("choiceLinear");a=a.getAttribute("data-qtype");"s"==a?b.style.backgroundColor="#dbd9d9":"t"==a?d.style.backgroundColor="#dbd9d9":"m"==a?c.style.backgroundColor="#dbd9d9":"d"==a?g.style.backgroundColor="#dbd9d9":"l"==a&&(e.style.backgroundColor="#dbd9d9")}
function delete_light(){document.getElementById("choiceSingle").style.backgroundColor="#f1f1f1";document.getElementById("choiceMult").style.backgroundColor="#f1f1f1";document.getElementById("choiceText").style.backgroundColor="#f1f1f1";document.getElementById("choiceDrop").style.backgroundColor="#f1f1f1";document.getElementById("choiceLinear").style.backgroundColor="#f1f1f1"}
function poll_light(a){if("s"==a)var b="single";else"t"==a?b="text":"m"==a?b="multiple":"d"==a?b="dropdown":"l"==a&&(b="linear");document.getElementById("pollAnsType").value=b;"t"===a||"l"===a?document.getElementById("addChoiceLi").style.display="none":document.getElementById("addChoiceLi").style.display="block";delete_light();"s"==a?document.getElementById("choiceSingle").style.backgroundColor="#dbd9d9":"t"==a?document.getElementById("choiceText").style.backgroundColor="#dbd9d9":"m"==a?document.getElementById("choiceMultiple").style.backgroundColor=
"#dbd9d9":"d"==a?document.getElementById("choiceDrop").style.backgroundColor="#dbd9d9":"l"==a&&(document.getElementById("choiceLinear").style.backgroundColor="#dbd9d9")}
function add_question(a){q++;var b=document.getElementById("formelem"),c=document.createElement("div"),d=document.createElement("br"),g=document.createElement("br"),e="";c.setAttribute("id","q"+q);c.setAttribute("onmouseover","light_type(this)");c.setAttribute("onmouseout","delete_light()");"s"==a?(e="single",c.setAttribute("data-qtype","s")):"t"==a?(e="text",c.setAttribute("data-qtype","t")):"m"==a?(e="multiple",c.setAttribute("data-qtype","m")):"d"==a?(e="dropdown",c.setAttribute("data-qtype","d")):
"l"==a&&(e="linear",c.setAttribute("data-qtype","l"));var f='<table><tr><td style="box-sizing: border-box;width: 100%"><input class="formQuestion" type="text" name="question['+q+'][q]" maxlength="'+MAX_Q_LEN+'" placeholder="Question, type: '+e+'" title="Type: '+e+'" /></td><td><button class="deleteQuestion" type="button" onclick="del_question('+q+')">&times;</button></td>';f="s"==a||"m"==a||"d"==a?f+('<td><button class="choiceAdd" type="button" onclick="add_choice('+q+')">+</button></td></tr></table>'):
f+"</tr></table>";f+='<table style="display: table;margin-bottom:3px;"><tr><td>Required to answer?</td><td><div class="droplist"><select name="question['+q+'][req]"><option value="yes">Yes</option><option value="no">No</option></select><span class="fas fa-angle-down"></span></div></td></tr></table><input name="question['+q+'][type]" type="hidden" value="'+e+'"/><div class="formContent" id="q'+q+'-c"></div>';c.innerHTML=f;b.appendChild(d);b.appendChild(g);b.appendChild(c);gen_choices(q,a)}
function gen_choices(a,b){var c=document.getElementById("q"+a+"-c"),d="";"s"===b?(!0===POLL_MODE&&poll_light("s"),d+='<div id="q'+a+'-col"><div class="formChoices" id="formChoices0"><div class="deleteChoiceDiv"><button class="deleteQuestion" type="button" onclick="del_choice(0)">&times;</button></div><div class="formChoiceDiv"><input class="formTitle" style="width:100%;" type="text" name="question['+a+'][choices][] maxlength="'+MAX_C_LEN+'" placeholder="Choice text"></div></div></div>'):"d"===b?(!0===
POLL_MODE&&poll_light("d"),d+='<div id="q'+a+'-col"><div class="formChoices" id="formChoices0"><div class="deleteChoiceDiv"><button class="deleteQuestion" type="button" onclick="del_choice(0)">&times;</button></div><div class="formChoiceDiv"><input class="formTitle" style="width:100%;" type="text" name="question['+a+'][choices][] maxlength="'+MAX_C_LEN+'" placeholder="Choice text"></div></div></div>'):"m"===b?(!0===POLL_MODE&&poll_light("m"),d+='<div id="q'+a+'-col"><div class="formChoices" id="formChoices0"><div class="deleteChoiceDiv"><button class="deleteQuestion" type="button" onclick="del_choice(0)">&times;</button></div><div class="formChoiceDiv"><input class="formTitle" style="width:100%;" type="text" name="question['+
a+'][choices][] maxlength="'+MAX_C_LEN+'" placeholder="Choice text"></div></div></div>'):"t"===b?(!0===POLL_MODE&&poll_light("t"),d+='<p><input class="formTitle" style="width:100%;" type="text" name="question['+a+'][maxlen]" maxlength="'+MAX_T_LEN+'" placeholder="Max length (>512 is considered a paragraph, max is '+strrepeat("9",MAX_T_LEN)+')"/></p>'):"l"===b&&(!0===POLL_MODE&&poll_light("l"),d+='<table><tr><td style="width:40%;"><input class="formTitle" style="width:100%;padding-bottom:12px;" type="text" name="question['+
a+'][lowlab]" placeholder="Label (optional)" maxlength="'+MAX_C_LEN+'" /></td><td style="width:8%;"><div class="droplist"><select name="question['+a+'][lowval]"><option value="0">0</option><option value="1" selected="selected">1</option></select></div></td><td style="width:4%;">to</td><td style="width:8%;"><div class="droplist"><select name="question['+a+'][maxval]"><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10" selected="selected">10</option></select></div></td><td style="width:40%;"><input class="formTitle" style="width:100%;padding-bottom:12px;" type="text" name="question['+
a+'][maxlab]" placeholder="Label (optional)" maxlength="'+MAX_C_LEN+'" /></td></tr></table>');c.innerHTML=d}
function add_choice(a){var b=document.getElementById("q"+a+"-col"),c=b.getElementsByClassName("formChoices").length,d=document.createElement("div"),g=document.createElement("div"),e=document.createElement("div");g.setAttribute("class","deleteChoiceDiv");e.setAttribute("class","formChoiceDiv");var f=document.createElement("button"),h=document.createElement("input");f.setAttribute("class","deleteQuestion");f.setAttribute("onclick","del_choice("+c+")");f.setAttribute("type","button");f.innerHTML="&times;";
h.setAttribute("class","formTitle");h.setAttribute("type","text");h.setAttribute("name","question["+a+"][choices][]");h.setAttribute("maxlength",MAX_C_LEN);h.setAttribute("style","width:100%;");h.setAttribute("placeholder","Choice text");d.setAttribute("class","formChoices");d.setAttribute("id","formChoices"+c);g.appendChild(f);e.appendChild(h);d.appendChild(g);d.appendChild(e);b.appendChild(d)}function del_choice(a){document.getElementById("formChoices"+a).remove()}
function del_question(a){a=document.getElementById("q"+a);a.parentNode.removeChild(a)};