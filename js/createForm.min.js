var q=-1;function strrepeat(s,l){for(var str="",index=0;index<l;index++)str+=s;return str}function light_type(q){var cs=document.getElementById("choiceSingle"),cm=document.getElementById("choiceMult"),ct=document.getElementById("choiceText"),cd=document.getElementById("choiceDrop"),cl=document.getElementById("choiceLinear"),t=q.getAttribute("data-qtype");"s"==t?cs.style.backgroundColor="#dbd9d9":"t"==t?ct.style.backgroundColor="#dbd9d9":"m"==t?cm.style.backgroundColor="#dbd9d9":"d"==t?cd.style.backgroundColor="#dbd9d9":"l"==t&&(cl.style.backgroundColor="#dbd9d9")}function delete_light(){document.getElementById("choiceSingle").style.backgroundColor="#f1f1f1",document.getElementById("choiceMult").style.backgroundColor="#f1f1f1",document.getElementById("choiceText").style.backgroundColor="#f1f1f1",document.getElementById("choiceDrop").style.backgroundColor="#f1f1f1",document.getElementById("choiceLinear").style.backgroundColor="#f1f1f1"}function poll_light(type){if("s"==type)var t="single";else if("t"==type)var t="text";else if("m"==type)var t="multiple";else if("d"==type)var t="dropdown";else if("l"==type)var t="linear";document.getElementById("pollAnsType").value=t,document.getElementById("addChoiceLi").style.display="t"===type||"l"===type?"none":"block",delete_light(),"s"==type?document.getElementById("choiceSingle").style.backgroundColor="#dbd9d9":"t"==type?document.getElementById("choiceText").style.backgroundColor="#dbd9d9":"m"==type?document.getElementById("choiceMultiple").style.backgroundColor="#dbd9d9":"d"==type?document.getElementById("choiceDrop").style.backgroundColor="#dbd9d9":"l"==type&&(document.getElementById("choiceLinear").style.backgroundColor="#dbd9d9")}function add_question(type){q++;var el=document.getElementById("formelem"),newel=document.createElement("div"),n1=document.createElement("br"),n3=document.createElement("br");if(newel.setAttribute("id","q"+q),newel.setAttribute("onmouseover","light_type(this)"),newel.setAttribute("onmouseout","delete_light()"),"s"==type){var t="single";newel.setAttribute("data-qtype","s")}else if("t"==type){var t="text";newel.setAttribute("data-qtype","t")}else if("m"==type){var t="multiple";newel.setAttribute("data-qtype","m")}else if("d"==type){var t="dropdown";newel.setAttribute("data-qtype","d")}else if("l"==type){var t="linear";newel.setAttribute("data-qtype","l")}var b='<table><tr><td style="box-sizing: border-box;width: 100%"><input class="formQuestion" type="text" name="question['+q+'][q]" maxlength="'+MAX_Q_LEN+'" placeholder="Question, type: '+t+'" title="Type: '+t+'" /></td><td><button class="deleteQuestion" type="button" onclick="del_question('+q+')">&times;</button></td>';b+="s"==type||"m"==type||"d"==type?'<td><button class="choiceAdd" type="button" onclick="add_choice('+q+')">+</button></td></tr></table>':"</tr></table>",b+='<table style="display: table;margin-bottom:3px;"><tr><td>Required to answer?</td><td><div class="droplist"><select name="question['+q+'][req]"><option value="yes">Yes</option><option value="no">No</option></select><span class="fas fa-angle-down"></span></div></td></tr></table><input name="question['+q+'][type]" type="hidden" value="'+t+'"/><div class="formContent" id="q'+q+'-c"></div>',newel.innerHTML=b,el.appendChild(n1),el.appendChild(n3),el.appendChild(newel),gen_choices(q,type)}function gen_choices(qid,type){var content=document.getElementById("q"+qid+"-c"),b="";"s"===type?(!0===POLL_MODE&&poll_light("s"),b+='<div id="q'+qid+'-col"><div class="formChoices" id="formChoices0"><div class="deleteChoiceDiv"><button class="deleteQuestion" type="button" onclick="del_choice(0)">&times;</button></div><div class="formChoiceDiv"><input class="formTitle" style="width:100%;" type="text" name="question['+qid+'][choices][] maxlength="'+MAX_C_LEN+'" placeholder="Choice text"></div></div></div>'):"d"===type?(!0===POLL_MODE&&poll_light("d"),b+='<div id="q'+qid+'-col"><div class="formChoices" id="formChoices0"><div class="deleteChoiceDiv"><button class="deleteQuestion" type="button" onclick="del_choice(0)">&times;</button></div><div class="formChoiceDiv"><input class="formTitle" style="width:100%;" type="text" name="question['+qid+'][choices][] maxlength="'+MAX_C_LEN+'" placeholder="Choice text"></div></div></div>'):"m"===type?(!0===POLL_MODE&&poll_light("m"),b+='<div id="q'+qid+'-col"><div class="formChoices" id="formChoices0"><div class="deleteChoiceDiv"><button class="deleteQuestion" type="button" onclick="del_choice(0)">&times;</button></div><div class="formChoiceDiv"><input class="formTitle" style="width:100%;" type="text" name="question['+qid+'][choices][] maxlength="'+MAX_C_LEN+'" placeholder="Choice text"></div></div></div>'):"t"===type?(!0===POLL_MODE&&poll_light("t"),b+='<p><input class="formTitle" style="width:100%;" type="text" name="question['+qid+'][maxlen]" maxlength="'+MAX_T_LEN+'" placeholder="Max length (>512 is considered a paragraph, max is '+strrepeat("9",MAX_T_LEN)+')"/></p>'):"l"===type&&(!0===POLL_MODE&&poll_light("l"),b+='<table><tr><td><input class="formTitle" style="width:100%;padding-bottom:12px;" type="text" name="question['+qid+'][lowlab]" placeholder="Label (optional)" maxlength="'+MAX_C_LEN+'" /></td><td><div class="droplist"><select name="question['+qid+'][lowval]"><option value="0">0</option><option value="1" selected="selected">1</option></select></div></td><td>to</td><td><div class="droplist"><select name="question['+qid+'][maxval]"><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10" selected="selected">10</option></select></div></td><td><input class="formTitle" style="width:100%;padding-bottom:12px;" type="text" name="question['+qid+'][maxlab]" placeholder="Label (optional)" maxlength="'+MAX_C_LEN+'" /></td></tr></table>'),content.innerHTML=b}function add_choice(qid){var c=document.getElementById("q"+qid+"-col"),a=c.getElementsByClassName("formChoices").length,z=document.createElement("div"),d=document.createElement("div"),f=document.createElement("div");d.setAttribute("class","deleteChoiceDiv"),f.setAttribute("class","formChoiceDiv");var x=document.createElement("button"),y=document.createElement("input");x.setAttribute("class","deleteQuestion"),x.setAttribute("onclick","del_choice("+a+")"),x.setAttribute("type","button"),x.innerHTML="&times;",y.setAttribute("class","formTitle"),y.setAttribute("type","text"),y.setAttribute("name","question["+qid+"][choices][]"),y.setAttribute("maxlength",MAX_C_LEN),y.setAttribute("style","width:100%;"),y.setAttribute("placeholder","Choice text"),z.setAttribute("class","formChoices"),z.setAttribute("id","formChoices"+a),d.appendChild(x),f.appendChild(y),z.appendChild(d),z.appendChild(f),c.appendChild(z)}function del_choice(cid){var b=document.getElementById("formChoices"+cid).remove()}function del_question(qid){var q=document.getElementById("q"+qid);q.parentNode.removeChild(q)}