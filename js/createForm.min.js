var q=-1;function light_type(q){var cs=document.getElementById("choiceSingle"),cm=document.getElementById("choiceMult"),ct=document.getElementById("choiceText"),t=q.getAttribute("data-qtype");"s"==t?cs.style.backgroundColor="#dbd9d9":"t"==t?ct.style.backgroundColor="#dbd9d9":"m"==t&&(cm.style.backgroundColor="#dbd9d9")}function delete_light(){document.getElementById("choiceSingle").style.backgroundColor="#f1f1f1",document.getElementById("choiceMult").style.backgroundColor="#f1f1f1",document.getElementById("choiceText").style.backgroundColor="#f1f1f1"}function add_question(type){q++;var el=document.getElementById("formelem"),newel=document.createElement("div"),n1=document.createElement("br"),n3=document.createElement("br");if(newel.setAttribute("id","q"+q),newel.setAttribute("onmouseover","light_type(this)"),newel.setAttribute("onmouseout","delete_light()"),"s"==type){var t="single";newel.setAttribute("data-qtype","s")}else if("t"==type){var t="text";newel.setAttribute("data-qtype","t")}else if("m"==type){var t="multiple";newel.setAttribute("data-qtype","m")}var b='<table><tr><td style="box-sizing: border-box;width: 100%"><input class="formQuestion" type="text" name="question['+q+'][q]" maxlength="'+MAX_Q_LEN+'" placeholder="Question, type: '+t+'" title="Type: '+t+'" /></td><td><button class="deleteQuestion" type="button" onclick="del_question('+q+')">&times;</button></td>';b+="s"==type||"m"==type?'<td><button class="choiceAdd" type="button" onclick="add_choice('+q+')">+</button></td></tr></table>':"</tr></table>",b+='<table style="display: table"><tr><td>Required to answer?</td><td><input class="formRadio" type="radio" name="question['+q+'][req]" value="yes" /> Yes <input class="formRadio" type="radio" name="question['+q+'][req]" value="no" /> No</td></tr></table><input name="question['+q+'][type]" type="hidden" value="'+t+'"/><div class="formContent" id="q'+q+'-c"></div>',newel.innerHTML=b,el.appendChild(n1),el.appendChild(n3),el.appendChild(newel),gen_choices(q,type)}function gen_choices(qid,type){var content=document.getElementById("q"+qid+"-c"),b="";"s"===type?("undefined"!=typeof POLL_MODE&&(document.getElementById("pollAnsType").value="single",document.getElementById("addChoiceLi").style.display="block",document.getElementById("choiceSingle").style.backgroundColor="#dbd9d9",document.getElementById("choiceText").style.backgroundColor="#f1f1f1",document.getElementById("choiceMult").style.backgroundColor="#f1f1f1"),b+='<div id="q'+qid+'-col"><div class="formChoices" id="formChoices0"><div class="deleteChoiceDiv"><button class="deleteQuestion" type="button" onclick="del_choice(0)">&times;</button></div><div class="formChoiceDiv"><input class="formTitle" style="width:100%;" type="text" name="question['+qid+'][choices][] maxlength="'+MAX_C_LEN+'" placeholder="Choice text"></div></div></div>'):"m"===type?("undefined"!=typeof POLL_MODE&&(document.getElementById("pollAnsType").value="multiple",document.getElementById("addChoiceLi").style.display="block",document.getElementById("choiceMult").style.backgroundColor="#dbd9d9",document.getElementById("choiceSingle").style.backgroundColor="#f1f1f1",document.getElementById("choiceText").style.backgroundColor="#f1f1f1"),b+='<div id="q'+qid+'-col"><div class="formChoices" id="formChoices0"><div class="deleteChoiceDiv"><button class="deleteQuestion" type="button" onclick="del_choice(0)">&times;</button></div><div class="formChoiceDiv"><input class="formTitle" style="width:100%;" type="text" name="question['+qid+'][choices][] maxlength="'+MAX_C_LEN+'" placeholder="Choice text"></div></div></div>'):"t"===type&&("undefined"!=typeof POLL_MODE&&(document.getElementById("pollAnsType").value="text",document.getElementById("addChoiceLi").style.display="none",document.getElementById("choiceText").style.backgroundColor="#dbd9d9",document.getElementById("choiceMult").style.backgroundColor="#f1f1f1",document.getElementById("choiceSingle").style.backgroundColor="#f1f1f1"),b+='<p><input class="formTitle" style="width:100%;" type="text" name="question['+qid+'][maxlen]" maxlength="'+MAX_T_LEN+'" placeholder="Max length (>512 is considered a paragraph, max is '+"9".repeat(MAX_T_LEN)+')"/></p>'),content.innerHTML=b}function add_choice(qid){var c=document.getElementById("q"+qid+"-col"),a=c.getElementsByClassName("formChoices").length,z=document.createElement("div"),d=document.createElement("div"),f=document.createElement("div");d.setAttribute("class","deleteChoiceDiv"),f.setAttribute("class","formChoiceDiv");var x=document.createElement("button"),y=document.createElement("input");x.setAttribute("class","deleteQuestion"),x.setAttribute("onclick","del_choice("+a+")"),x.setAttribute("type","button"),x.innerHTML="&times;",y.setAttribute("class","formTitle"),y.setAttribute("type","text"),y.setAttribute("name","question["+qid+"][choices][]"),y.setAttribute("maxlength",MAX_C_LEN),y.setAttribute("style","width:100%;"),y.setAttribute("placeholder","Choice text"),z.setAttribute("class","formChoices"),z.setAttribute("id","formChoices"+a),d.appendChild(x),f.appendChild(y),z.appendChild(d),z.appendChild(f),c.appendChild(z)}function del_choice(cid){var b=document.getElementById("formChoices"+cid).remove()}function del_question(qid){var q=document.getElementById("q"+qid);q.parentNode.removeChild(q)}